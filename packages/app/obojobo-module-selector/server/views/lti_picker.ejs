<!DOCTYPE html>
<html lang="en">
	<head>
			<%
			const { webpackAssetPath } = oboRequire('asset_resolver')
			const title = 'Obojobo Module Selector'
			const css = [
				webpackAssetPath('module-selector.css')
			]
	
			const headerJs = [
				'//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js',
				'/module-selector/jquery-ui-1.10.3.custom.js'
			]
	
			const footerJs = [
				webpackAssetPath('module-selector.js')
			]
	
			const fonts = ['//fonts.googleapis.com/css?family=Libre+Franklin:300,400,700']
		%>
		<%- include ../../../obojobo-express/views/partials/head %>
	</head>
	<body>
		<section id="section-module-selection">
			<header>
				<div class="heading-container">
					<h1>
						<span class="remaining-tagline">Embed an Obojobo&reg; Next Module</span>
					</h1>
				</div>
				<div class="flourish-line"></div>
			</header>

			<p>Choose between:</p>

			<div class="choose-library-wrapper">
				<a role="button" id="personal-library-button" class="wizard-button-container ">
					<div href="#" class="wizard-button">
						Personal<br />
						Library
					</div>
					<p>
						Modules you've created.
					</p>
				</a>

				<a role="button" id="community-library-button" class="wizard-button-container">
					<div href="#" class="wizard-button">
						Community<br />
						Collection
					</div>
					<p>
						Modules from others.
					</p>
				</a>
			</div>
		</section>

		<section id="section-select-object">
			<div id="list-header-wrapper">
				<div id="list-header">
					<div id="header-title">
						<div id="select-section-title"></div>
					</div>
					<div id="search-controls">
						<input type="text" id="search" placeholder="search modules..." />
						<a id="refresh" role="button" href="#">Refresh</a>
					</div>
					<div class="flourish-line"></div>
					<a href="#" role="button" id="back-button">Back</a>
				</div>
			</div>

			<div id="list-container">
				<ul class="template">
					<li class="template obo-item">
						<div class="obo-item-container">
							<div class="buttons">
								<a role="button" class="button embed-button" href="#">Embed</a>
								<a class="preview external" target="_blank" href="#">Preview</a>
							</div>
							<div class="description">
								<h2><span class="title"></span></h2>
								<div class="draft-id"></div>
							</div>
						</div>
					</li>
				</ul>

				<div class="section community-library">
					<ul></ul>
				</div>

				<div class="section my-modules">
					<ul></ul>
					<div class="no-items no-objects">
						<p>
							You don't have any objects. Click the button below to create an object at Obojobo,
							then return to this page and select your newly created instance.
						</p>
						<a class="button" role="button" target="_blank" href="/dashboard"
							>Create a new Obojobo Next module</a
						>
					</div>
				</div>
			</div>

			<div class="new-module-button-wrapper">
				<a href="/dashboard" role="button" class="button" target="_blank" id="new-module"
					>Create a New Module</a
				>
			</div>
		</section>

		<section id="section-progress">
			<header>
				<div class="heading-container">
					<h1>
						<span class="remaining-tagline">Obojobo&reg; Next Learning Module Selection</span>
					</h1>
				</div>
				<div class="flourish-line"></div>
			</header>

			<div class="progress-container">
				<span>Embedding Module...</span>
				<div class="progressbar"></div>
			</div>
		</section>

		<section id="section-success">
			<header>
				<span class="logo-text">Obojobo&reg;</span>
				<div class="flourish-line"></div>
			</header>
			<div class="grey-box">
				<h1>Obojobo Instance Connected:</h1>
				<h2 class="selected-instance-title"></h2>
				<span class="note"
					>Scores for this Obojobo assignment will sync with your Canvas gradebook</span
				>
			</div>
			<a href="#" class="preview-link" target="_blank">Preview this instance in a new window...</a>
		</section>

		<section id="loading"></section>
		<section id="dead"></section>

		<div id="error-window" title="Error">
			<p>
				Sorry, something went wrong. Please try again.
			</p>
		</div>

		<div id="confirm-window" title="Are you sure?">
			<p>
				Scores will no longer sync to Canvas and you will need to connect to another object.
			</p>
		</div>

		<form id="submit-form" action="" method="post" encType="application/x-www-form-urlencoded">
			<input type="hidden" name="lti_message_type" value="ContentItemSelection" />
			<input type="hidden" name="lti_version" value="LTI-1p0" />
			<input type="hidden" name="content_items" value="" />
		</form>

		<script type="text/javascript">
			window.__returnUrl = '<%= returnUrl %>';
			window.__isAssignment = <%= isAssignment ? 'true' : 'false' %>
		</script>

		<% if (typeof inlines !== 'undefined') { inlines.forEach(function(inline) { %>
		<script>
			<% - js %>
		</script>
		<% }) } if (typeof footerJs !== 'undefined') { footerJs.forEach(function(href) { %>
		<script src="<%= href %>"></script>
		<% }) } %>
	</body>
</html>
